<main class="px-4 py-4">
  <mat-stepper [linear]="isLinear" #stepper>
    <mat-step [stepControl]="firstFormGroup">
      <form [formGroup]="firstFormGroup">
        <ng-template matStepLabel>{{ "booking.select-doctor-title" | translate}}</ng-template>

        <div class="filters space-y-2">
          <h1 class="text-primary font-medium">{{ "booking.filters" | translate}}</h1>
          <div class="flex space-x-6">
            <mat-form-field appearance="fill">
              <mat-label>{{ "auth.register.specialty-label" | translate }}</mat-label>
              <mat-select><mat-option value="one">In progress</mat-option></mat-select>
            </mat-form-field>
            <mat-form-field appearance="fill">
              <mat-label>{{ "booking.search-by-doctor" | translate}}</mat-label>
              <input matInput type="text">
              <button mat-button matSuffix><mat-icon>search</mat-icon></button>
            </mat-form-field>
            <app-country-selector></app-country-selector>
            <mat-form-field appearance="fill">
              <mat-label>{{ "booking.enter-a-date-range" | translate}}</mat-label>
              <mat-date-range-input [rangePicker]="picker">
                <input matStartDate placeholder="Start date">
                <input matEndDate placeholder="End date">
              </mat-date-range-input>
              <mat-hint>{{ "booking.date-hint" | translate}}</mat-hint>
              <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
              <mat-date-range-picker #picker></mat-date-range-picker>
            </mat-form-field>
            <mat-form-field appearance="fill">
              <mat-label>{{ "booking.patient" | translate}}</mat-label>
              <mat-select>
                <mat-option value="one">{{ "booking.myself" | translate}}</mat-option>
                <mat-option value="one">{{ "booking.mychild" | translate}}</mat-option>
              </mat-select>
            </mat-form-field>
          </div>
        </div>

        <!-- Doctor selection -->
        <div class="flex">
          <div class="flex grid-cols-5 space-x-6">
            <div *ngFor="let doctor of doctors" class="flex flex-col px-6 py-6 max-w-md rounded-xl border">
                <div class="flex items-center space-x-2">
                  <div class="h-20 w-20 rounded-full overflow-hidden object-cover">
                    <img class="object-cover" [src]="doctor.profileImageUrl" alt="Doctor's profile image">
                  </div>
                  <ul>
                    <li class="font-medium text-xl"><h1>{{doctor.name}} {{doctor.lastName}}</h1></li>
                    <li class="text-primary">{{doctor.specialty}}</li>
                    <li><a class="text-secondary" href="#"> {{"booking.view-profile" | translate}}<span>({{doctor.rating}}&#9733;)</span></a></li>
                    <li class="font-medium">{{doctor.price}} USD</li>
                  </ul>
                </div>
                <button mat-raised-button color="primary" matStepperNext (click)="updateAppointmentDoctor(doctor)"> {{ "booking.book" | translate}}</button>
            </div>
          </div>
        </div>
      </form>
    </mat-step>

    <!-- Appointment date -->
    <mat-step [stepControl]="secondFormGroup" label="Select date">
      <form [formGroup]="secondFormGroup" class="flex space-x-4">
        <mat-card class="w-1/4">
          <mat-calendar [(selected)]="selectedDate"></mat-calendar>
        </mat-card>
        <div class="w-1/3">
          <mat-form-field class="w-full">
            <mat-label>
              {{ selectedDate === null ? "Please select a date to continue" : "Date selected" }}
            </mat-label>
            <input matInput disabled :value={{selectedDate}}>
          </mat-form-field>
          <div class="flex gap-2">
            <button  mat-raised-button color="primary" matStepperPrevious>{{"booking.back" | translate}}</button>
            <button mat-raised-button color="primary" matStepperNext>{{"booking.next" | translate}}</button>
          </div>
        </div>
      </form>
    </mat-step>

    <!-- Payment -->
    <mat-step [stepControl]="thirdFormGroup" label="Select payment">
      <form [formGroup]="thirdFormGroup" class="justify-center ">
        <p>Building...</p>
        <div class="flex gap-2">
          <button mat-raised-button color="primary" matStepperPrevious>{{"booking.back" | translate}}</button>
          <button mat-raised-button color="primary" (click)="createAppointment()" matStepperNext>{{ "booking.confirm-payment" | translate }}</button>
        </div>
      </form>
    </mat-step>

    <mat-step>
      <ng-template matStepLabel>Confirm</ng-template>
      <p>{{"booking.confirmation-text" | translate}}
        <a class="text-secondary" [routerLink]="['/home']">{{"booking.go-home" | translate}}</a>
      </p>
    </mat-step>
  </mat-stepper>
</main>
